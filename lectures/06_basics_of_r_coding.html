<!DOCTYPE html>
<html lang="" xml:lang="">
  <head>
    <title>Basics of R coding</title>
    <meta charset="utf-8" />
    <meta name="author" content="Niklas Mähler" />
    <meta name="date" content="2021-10-04" />
    <script src="libs/header-attrs-2.11/header-attrs.js"></script>
    <link href="libs/remark-css-0.0.1/default.css" rel="stylesheet" />
    <script src="libs/kePrint-0.0.1/kePrint.js"></script>
    <link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet" />
    <link rel="stylesheet" href="css/niklas.css" type="text/css" />
    <link rel="stylesheet" href="css/niklas-fonts.css" type="text/css" />
  </head>
  <body>
    <textarea id="source">
class: left, middle, inverse, title-slide

# Basics of R coding
## Practical Skills for Biology Research II
### Niklas Mähler
### Umeå University
### 2021-10-04

---


layout: true

<div class="footer">
<a href="https://github.com/maehler/psbr2/tree/main/lectures/06_basics_of_r_coding.Rmd">
<svg viewBox="0 0 496 512" style="height:1em;position:relative;display:inline-block;top:.1em;" xmlns="http://www.w3.org/2000/svg">
<path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"></path>
</svg>
</a>
</div>

---

# Learning goals

- Know about the basic operators in R
- Know what a function is
- Know about the basic data types and structures in R
- Be able to interpret code written by someone else

---

# What is programming?

- Writing instructions telling the computer what to do
- Telling *others* what you want to do.

???

Not only are you telling the computer what you want to do, but you also communicate to others reading your code what you want to do.

---

# R can be a calculator


```r
1 / 200 * 30
```

```
## [1] 0.15
```

```r
(59 + 73 + 2) / 3
```

```
## [1] 44.66667
```

```r
sin(pi / 2)
```

```
## [1] 1
```

---

# Common operators


|Operator |Description      |Example        |
|:--------|:----------------|:--------------|
|`+`      |Addition         |`5 + 2 == 7`   |
|`-`      |Subtraction      |`5 - 2 == 3`   |
|`*`      |Multiplication   |`5 * 2 == 10`  |
|`/`      |Division         |`5 / 2 == 2.5` |
|`^`      |Power            |`5 ^ 2 == 25`  |
|`%%`     |Modulo           |`5 %% 2 == 1`  |
|`%/%`    |Integer division |`5 %/% 2 == 2` |

???

Just running these examples in the console, R will print the result.
What if we want to store that result in order to use it somewhere else?

---

# Variable assignment

Variable assignment uses the `&lt;-` operator.


```r
x &lt;- 5 + 2
```

This will save the result of the operation into an object `x`.
You can read it as "x gets the value 5 + 2".
This will make it possible to reuse this result later.


```r
y &lt;- x ^ 2
```

In order to see what a variable contains, we can simply enter it into the console.


```r
y
```

```
## [1] 49
```

---

# The environment pane

You will also be able to see any variables that you have defined in the environment pane.

![:scale 60%](../img/rstudio_default.png)

???

Live demonstration.

- Declare variables.
- Show how they look in the environment pane.
- Show how you can view a tibble, and what code this corresponds to in the console.

---

# Naming variables

Variables must start with a letter, and they can only contain letters, numbers, and the characters `.` and `_`.

.note.yellow[
&lt;svg viewBox="0 0 352 512" style="position:relative;display:inline-block;top:.1em;height:2em;" xmlns="http://www.w3.org/2000/svg"&gt;  &lt;path d="M176 80c-52.94 0-96 43.06-96 96 0 8.84 7.16 16 16 16s16-7.16 16-16c0-35.3 28.72-64 64-64 8.84 0 16-7.16 16-16s-7.16-16-16-16zM96.06 459.17c0 3.15.93 6.22 2.68 8.84l24.51 36.84c2.97 4.46 7.97 7.14 13.32 7.14h78.85c5.36 0 10.36-2.68 13.32-7.14l24.51-36.84c1.74-2.62 2.67-5.7 2.68-8.84l.05-43.18H96.02l.04 43.18zM176 0C73.72 0 0 82.97 0 176c0 44.37 16.45 84.85 43.56 115.78 16.64 18.99 42.74 58.8 52.42 92.16v.06h48v-.12c-.01-4.77-.72-9.51-2.15-14.07-5.59-17.81-22.82-64.77-62.17-109.67-20.54-23.43-31.52-53.15-31.61-84.14-.2-73.64 59.67-128 127.95-128 70.58 0 128 57.42 128 128 0 30.97-11.24 60.85-31.65 84.14-39.11 44.61-56.42 91.47-62.1 109.46a47.507 47.507 0 0 0-2.22 14.3v.1h48v-.05c9.68-33.37 35.78-73.18 52.42-92.16C335.55 260.85 352 220.37 352 176 352 78.8 273.2 0 176 0z"&gt;&lt;/path&gt;&lt;/svg&gt;
If you are familiar with other programming lanugages, you might think that `.` has a special meaning, like in Python where it is used for accessing methods of objects, for example.
In R it's just any old character.
]

There are many conventions when it comes to variable naming:

```
i_use_snake_case
otherPeopleUseCamelCase
some.people.use.periods
And_aFew.People_RENOUNCEconvention
```

I will use `snake_case` in all my examples, and I recommend you do to.
However, the most important thing is **consistency**.

.note.red[
&lt;svg viewBox="0 0 576 512" style="position:relative;display:inline-block;top:.1em;height:2em;" xmlns="http://www.w3.org/2000/svg"&gt;  &lt;path d="M569.517 440.013C587.975 472.007 564.806 512 527.94 512H48.054c-36.937 0-59.999-40.055-41.577-71.987L246.423 23.985c18.467-32.009 64.72-31.951 83.154 0l239.94 416.028zM288 354c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"&gt;&lt;/path&gt;&lt;/svg&gt;
Note that R is picky.
Spelling and character case matters!
There is a difference between `myVariable` and `myvariable`.
]

---

# Use meaningful variable names

What is easier to understand? This:


```r
a &lt;- 100
b &lt;- 50
c &lt;- 5
d &lt;- rnorm(a, b, c)
```

or this:


```r
number_of_samples &lt;- 100
sample_mean &lt;- 50
sample_standard_deviation &lt;- 5
random_samples &lt;- rnorm(number_of_samples, sample_mean, sample_standard_deviation)
```

???

These two blocks of code do the exact same thing, but one of them also tries to **explain** what it is doing by having meaningful variable names.
Sure, it's much more typing, but you will be happy when you revisit your code after a while and can pick up where you left off.

---

# Variable comparisons

Often in programming we want to compare values, e.g. "is x larger than y?", or "is x equal to y?".


|Operator |Description           |Example  |
|:--------|:---------------------|:--------|
|`&lt;`      |Strictly less than    |`5 &lt; 7`  |
|`&gt;`      |Strictly greater than |`7 &gt; 5`  |
|`&lt;=`     |Less or equal to      |`7 &lt;= 7` |
|`&gt;=`     |Greater or equal to   |`7 &gt;= 6` |
|==       |Equals                |`7 == 7` |
|!=       |Not equals            |`7 != 5` |

All of the examples in the table evaluate to `TRUE`.

---

# Comparisons of decimal numbers

.note.red[
&lt;svg viewBox="0 0 576 512" style="position:relative;display:inline-block;top:.1em;height:2em;" xmlns="http://www.w3.org/2000/svg"&gt;  &lt;path d="M569.517 440.013C587.975 472.007 564.806 512 527.94 512H48.054c-36.937 0-59.999-40.055-41.577-71.987L246.423 23.985c18.467-32.009 64.72-31.951 83.154 0l239.94 416.028zM288 354c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"&gt;&lt;/path&gt;&lt;/svg&gt;
When doing exact comparisons of decimal numbers, you might get unexpected results.
This is due to the inability of computers to represent decimal numbers accurately, something called [floating point precision](https://en.wikipedia.org/wiki/Floating-point_arithmetic).
]


```r
(0.3 * 3) + 0.1 - 1
```

```
## [1] -1.110223e-16
```

--


```r
(0.3 * 3) + 0.1 == 1
```

```
## [1] FALSE
```

--


```r
all.equal((0.3 * 3) + 0.1, 1)
```

```
## [1] TRUE
```

???

So, we see here that we have different representations of variables in R.
Decimal numbers, or floating point numbers, are different from integer numbers, and we have also seen that we have a `TRUE`/`FALSE`.

---

# Calling functions

.left-column[
## What is a function?
]

.right-column[
&gt; In computer programming, a subroutine is a sequence of program instructions that performs a specific task, packaged as a unit.
&gt; This unit can then be used in programs wherever that particular task should be performed.

.right[https://en.wikipedia.org/wiki/Subroutine]

You have already used quite a few functions, for example when visualising data with ggplot2.
R has a lot of built-in functions that we tend to rely more or less upon.
]

???

This is a general concept, and nothing that is unique for R.

---

# Calling functions

.left-column[
## What is a function?
## Structure
]

.right-column[
Functions are structured like this:


```r
function_name(arg1 = val1, arg2 = val2, ...)
```

.note.yellow[
&lt;svg viewBox="0 0 352 512" style="position:relative;display:inline-block;top:.1em;height:2em;" xmlns="http://www.w3.org/2000/svg"&gt;  &lt;path d="M176 80c-52.94 0-96 43.06-96 96 0 8.84 7.16 16 16 16s16-7.16 16-16c0-35.3 28.72-64 64-64 8.84 0 16-7.16 16-16s-7.16-16-16-16zM96.06 459.17c0 3.15.93 6.22 2.68 8.84l24.51 36.84c2.97 4.46 7.97 7.14 13.32 7.14h78.85c5.36 0 10.36-2.68 13.32-7.14l24.51-36.84c1.74-2.62 2.67-5.7 2.68-8.84l.05-43.18H96.02l.04 43.18zM176 0C73.72 0 0 82.97 0 176c0 44.37 16.45 84.85 43.56 115.78 16.64 18.99 42.74 58.8 52.42 92.16v.06h48v-.12c-.01-4.77-.72-9.51-2.15-14.07-5.59-17.81-22.82-64.77-62.17-109.67-20.54-23.43-31.52-53.15-31.61-84.14-.2-73.64 59.67-128 127.95-128 70.58 0 128 57.42 128 128 0 30.97-11.24 60.85-31.65 84.14-39.11 44.61-56.42 91.47-62.1 109.46a47.507 47.507 0 0 0-2.22 14.3v.1h48v-.05c9.68-33.37 35.78-73.18 52.42-92.16C335.55 260.85 352 220.37 352 176 352 78.8 273.2 0 176 0z"&gt;&lt;/path&gt;&lt;/svg&gt;
When typing the name of a function, you can press the &lt;kbd&gt;Tab&lt;/kbd&gt; key on your keyboard in order to get autocompletion suggestions.
This also works for variables, and it's a function I use all the time.
Try to make it a habit, since it also helps you avoid simple mistakes, such as spelling errors.
]
]

---

# Calling functions

.left-column[
## What is a function?
## Structure
## Function arguments
]

.right-column[
Arguments can be supplied either by name, or by position, or a combination of the two.
For example, the function `seq` has the following definition:


```r
seq(from = 1, to = 1, by = ((to - from)/(length.out - 1)),
    length.out = NULL, along.with = NULL, ...)
```
]

???

Let's use the `seq` function as an example.
This function create sequences of numbers based on the input arguments.

Whenever an argument is followed by an equals sign and an expression, this is the default value for this argument.
Here we can see that the default value of `from` is 1, and the default value of `to` is also 1.
What do you think the result would be if we called this function without any arguments at all?

--

.right-column[
And we can call it in a number of different ways:


```r
seq(0, 10, 2)
```

```
## [1]  0  2  4  6  8 10
```
]

--

.right-column[

```r
seq(from = 0, to = 10, by = 2)
```

```
## [1]  0  2  4  6  8 10
```
]

--

.right-column[

```r
seq(0, 10, length.out = 6)
```

```
## [1]  0  2  4  6  8 10
```
]

???

All of these calls produce the same result, but in slightly different ways.
The important thing to take away from this is that if we give a function unnamed arguments, the order that we give them must match with the order in the function definition.

Later in the course we will go over how we can write our own functions.

---

# Atomic data types

.left-column[
## Double
]

.right-column[
Double-precision floating point values, "regular numbers".


```r
pi
```

```
## [1] 3.141593
```

```r
typeof(pi)
```

```
## [1] "double"
```

```r
typeof(5)
```

```
## [1] "double"
```
]

???

As the name implies, atomic data types refer to the smallest types that we have in R.
From these we can build more complex structures.

---

# Atomic data types

.left-column[
## Double
## Integer
]

.right-column[
Numbers without any decimal fraction.
These we normally don't come across in everyday analyses, at least not in their pure form, since numbers normally are represented as doubles.


```r
5L
```

```
## [1] 5
```

```r
typeof(5L)
```

```
## [1] "integer"
```
]

---

# Atomic data types

.left-column[
## Double
## Integer
## Character
]

.right-column[
Text, or strings.
Has to be enclosed in quotes.


```r
x &lt;- "hello world"
```

If we need to represent quotes in a character string, we can escape them with a backslash:


```r
x &lt;- "hello \"world\""
```
]

???

Both single and double quotes work, but preferably don't mix them.

If we don't use quotes, this is something called a "bare name", and R will in most cases try to find an object with that name in your environment.
I will not explain the exceptions to this here and now though, just assume that if you see a word without quotes, it is either referring to a reserved keyword in R, or an object.

---

# Atomic data types

.left-column[
## Double
## Integer
## Character
## Logical
]

.right-column[
Boolean values, either `TRUE` or `FALSE`.


```r
5 &lt; 7
```

```
## [1] TRUE
```

```r
"R" == "Python"
```

```
## [1] FALSE
```
]

---

# Logical operators

We can also do arithmetic using boolean values.

&lt;table&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:left;"&gt; Operator &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; Meaning &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;font-family: monospace;"&gt; &amp;amp; &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; And &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;font-family: monospace;"&gt; | &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Or &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;font-family: monospace;"&gt; xor &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Exclusive or &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

.center[
![:scale 50%](https://d33wubrfki0l68.cloudfront.net/01f4b6d39d2be8269740a3ad7946faa79f7243cf/8369a/diagrams/transform-logical.png)
]

---

# Logical operators

.pull-left[

```r
TRUE &amp; TRUE
```

```
## [1] TRUE
```

```r
TRUE &amp; FALSE
```

```
## [1] FALSE
```

```r
FALSE &amp; FALSE
```

```
## [1] FALSE
```

```r
TRUE | TRUE
```

```
## [1] TRUE
```

```r
TRUE | FALSE
```

```
## [1] TRUE
```
]

.pull-right[

```r
FALSE | FALSE
```

```
## [1] FALSE
```

```r
xor(TRUE, TRUE)
```

```
## [1] FALSE
```

```r
xor(TRUE, FALSE)
```

```
## [1] TRUE
```

```r
xor(FALSE, FALSE)
```

```
## [1] FALSE
```
]

---

# Vectors

Everything we've done so far has been using vectors, and this is the default data structure in R.
Vectors are composed of elements of a single data type, and they have a length.


```r
x &lt;- 5
length(x)
```

```
## [1] 1
```

--

We can use the `c` function to **c**ombine objects into a vector.


```r
x &lt;- c(1, 2, 3, 4, 5)
length(x)
```

```
## [1] 5
```

--

There is also a short-hand way of creating numerical vectors as the one above.


```r
x &lt;- 1:5
x
```

```
## [1] 1 2 3 4 5
```


---

# Vectors

If we try to combine objects of different types, R tries to convert them to a representation common to all of them.
This is known as **coercion**.


```r
c(1, 2, 3L, 4L)
```

```
## [1] 1 2 3 4
```

--


```r
c("one", 2, 3L, "four")
```

```
## [1] "one"  "2"    "3"    "four"
```

--


```r
c(0, 1, TRUE, FALSE)
```

```
## [1] 0 1 1 0
```

--


```r
c(0, 1, TRUE, FALSE, "hello")
```

```
## [1] "0"     "1"     "TRUE"  "FALSE" "hello"
```

---

# Coercion

If there is a single character value in the vector, all values will be converted to characters.


```r
c(0, 1, TRUE, FALSE, "hello")
```

```
## [1] "0"     "1"     "TRUE"  "FALSE" "hello"
```

If it only contains numbers and logicals, the logical values will be converted to numbers.


```r
c(0, 1, TRUE, FALSE, 3.14)
```

```
## [1] 0.00 1.00 1.00 0.00 3.14
```

---

# Coercion

Coercion can sometimes feel arbitrary, but once you get used to it, it can be quite useful.


```r
x &lt;- c(TRUE, TRUE, FALSE, FALSE)
sum(x)
```

```
## [1] 2
```

```r
mean(x)
```

```
## [1] 0.5
```

???

One of the most useful ways we can use coercion is with logical vectors.
The sum of a logical vector is the number of `TRUE` values.
The mean can be seen as the fraction of `TRUE` values in the vector.

---

# Coercion

We can also convert values manually by using the `as.*` functions.


```r
as.character(1)
```

```
## [1] "1"
```

```r
as.logical(1)
```

```
## [1] TRUE
```

```r
as.logical(0)
```

```
## [1] FALSE
```

```r
as.numeric(TRUE)
```

```
## [1] 1
```

---

# Naming vectors

The elements in a vector can be named.


```r
x &lt;- c(first = 0, second = 1, third = 2)
x
```

```
##  first second  third 
##      0      1      2
```

--


```r
names(x)
```

```
## [1] "first"  "second" "third"
```

--


```r
names(x) &lt;- c("one", "two", "three")
x
```

```
##   one   two three 
##     0     1     2
```

---

# Vector indexing

We can access individual elements in a vector using square brackets.


```r
x &lt;- 10:15
x
```

```
## [1] 10 11 12 13 14 15
```

```r
x[1]
```

```
## [1] 10
```

```r
x[2]
```

```
## [1] 11
```

.note.red[
&lt;svg viewBox="0 0 576 512" style="position:relative;display:inline-block;top:.1em;height:2em;" xmlns="http://www.w3.org/2000/svg"&gt;  &lt;path d="M569.517 440.013C587.975 472.007 564.806 512 527.94 512H48.054c-36.937 0-59.999-40.055-41.577-71.987L246.423 23.985c18.467-32.009 64.72-31.951 83.154 0l239.94 416.028zM288 354c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"&gt;&lt;/path&gt;&lt;/svg&gt;
If you have some experience in programming, you might be used to numbering starting at 0.
This is not the case in R where indexing is 1-based.
]

---

# Vector indexing

You can also get a range of numbers by indexing a vector with another vector.


```r
x &lt;- 10:15
x
```

```
## [1] 10 11 12 13 14 15
```

```r
x[c(1, 3, 5)]
```

```
## [1] 10 12 14
```

--

Yet another way of indexing is by using a boolean vector.


```r
x[c(TRUE, FALSE, TRUE, FALSE, TRUE, FALSE)]
```

```
## [1] 10 12 14
```

---

# Vector indexing

Finally, if your vector has names, you can also access elements by using these.


```r
x &lt;- c(first = 0, second = 1, third = 2, fourth = 3)
x
```

```
##  first second  third fourth 
##      0      1      2      3
```

```r
x["first"]
```

```
## first 
##     0
```

--

Just as when indexing with numbers, you can use a vector of strings.


```r
x[c("first", "third")]
```

```
## first third 
##     0     2
```

---

# Missing values

Sometimes you want to be able to represent missing values.
It could be that a particular experiment failed, or that a measurement was outside of the detection range of your instrument.

These values can be represented with `NA`.


```r
x &lt;- c(1, 2, 3, NA, 5)
```

???

It is an important distinction between a missing value, and just setting a value to a particular value, e.g. zero.
Was the value of the measurement really zero, or is that data point simply missing?

---

# Missing values


```r
x &lt;- c(1, 2, 3, NA, 5)
mean(x)
```

```
## [1] NA
```

```r
mean(x, na.rm = TRUE)
```

```
## [1] 2.75
```

```r
(x[is.na(x)] &lt;- 0)
```

```
## [1] 0
```

```r
mean(x)
```

```
## [1] 2.2
```

???

Many functions take missing values into consideration, and then it is also important to think about how these should be handled.
Oftentimes, if you try to calculate something on a vector containing missing values, you will get a missing value as the result.
You then have the option of excluding those values.
Note that this is not equivalent of setting the missing value to a fixed value.

---

# Composite data types

.left-column[
## Factor
]

.right-column[
Used for representing categorical variables.


```r
(x &lt;- factor(c(1, 1, 2, 2, 3, 3)))
```

```
## [1] 1 1 2 2 3 3
## Levels: 1 2 3
```
]

--

.right-column[
Each level can also be associated with a label.
By default, the label is the same as the original value.


```r
factor(c(1, 1, 2, 2, 3, 3), labels = c("one", "two", "three"))
```

```
## [1] one   one   two   two   three three
## Levels: one two three
```
]

--

.right-column[
... but the underlying representation is still integers, regardless of the original data type.


```r
as.numeric(factor(c("one", "one", "two", "two", "three", "three")))
```

```
## [1] 1 1 3 3 2 2
```
]

---

# Composite data types

.left-column[
## Factor
]

.right-column[
We can access the unique levels of a factor using the function `levels`:


```r
x &lt;- factor(c(1, 2, 1, 3, 4, 3), labels = c("one", "two", "three", "four"))
levels(x)
```

```
## [1] "one"   "two"   "three" "four"
```

... and we can get the number of levels with the function `nlevels`:


```r
nlevels(x)
```

```
## [1] 4
```
]

---


# Composite data types

.left-column[
## Factor
]

.right-column[
A convenience function for quickly creating factors is `gl` (generate levels).


```r
gl(3, 2)
```

```
## [1] 1 1 2 2 3 3
## Levels: 1 2 3
```


```r
gl(3, 5, labels = c("WT", "treatment1", "treatment2"))
```

```
##  [1] WT         WT         WT         WT         WT         treatment1
##  [7] treatment1 treatment1 treatment1 treatment1 treatment2 treatment2
## [13] treatment2 treatment2 treatment2
## Levels: WT treatment1 treatment2
```
]

???

The first argument to `gl` is the number of levels that we want in our factor.

The second argument is how many times each factor level should occur.

---

# Composite data types

.left-column[
## Factor
### Ordered factors
]

.right-column[
This is a special case of a regular factor where we have a natural ordering of the levels within a categorical variable.


```r
factor(c(1, 1, 2, 2, 3, 3), ordered = TRUE)
```

```
## [1] 1 1 2 2 3 3
## Levels: 1 &lt; 2 &lt; 3
```
]

--

.right-column[

```r
ordered(c(1, 1, 3, 3, 2, 2))
```

```
## [1] 1 1 3 3 2 2
## Levels: 1 &lt; 2 &lt; 3
```
]

--

.right-column[

```r
gl(3, 2, ordered = TRUE)
```

```
## [1] 1 1 2 2 3 3
## Levels: 1 &lt; 2 &lt; 3
```
]

---

# Composite data types

.left-column[
## Factor
### Ordered factors
## Matrix
]

.right-column[
A matrix can be seen as a two-dimensional vector.
Similar to vectors, the matrix must contain a single data type.


```r
matrix(1:9, nrow = 3)
```

```
##      [,1] [,2] [,3]
## [1,]    1    4    7
## [2,]    2    5    8
## [3,]    3    6    9
```

Just like vectors, it can have names, but instead of every single element being associated with a name, each row and column get a name.


```r
x &lt;- matrix(1:9, nrow = 3)
rownames(x) &lt;- c("row1", "row2", "row3")
colnames(x) &lt;- c("col1", "col2", "col3")
x
```

```
##      col1 col2 col3
## row1    1    4    7
## row2    2    5    8
## row3    3    6    9
```
]

---

# Composite data types

.left-column[
## Factor
### Ordered factors
## Matrix
]

.right-column[
Matrix indexing is similar to vector indexing, but we now have two dimensions to consider.
We then refer separately to rows and columns.


```r
x &lt;- matrix(1:9, nrow = 3)
x
```

```
##      [,1] [,2] [,3]
## [1,]    1    4    7
## [2,]    2    5    8
## [3,]    3    6    9
```

```r
row &lt;- 1
col &lt;- 2
x[row, col]
```

```
## [1] 4
```
]

---

# Composite data types

.left-column[
## Factor
### Ordered factors
## Matrix
]

.right-column[
If one of them is left blank, it will return all elements in that row or column.


```r
x
```

```
##      [,1] [,2] [,3]
## [1,]    1    4    7
## [2,]    2    5    8
## [3,]    3    6    9
```

```r
x[2, ]
```

```
## [1] 2 5 8
```

```r
x[, 2]
```

```
## [1] 4 5 6
```
]

---

# Composite data types

.left-column[
## Factor
### Ordered factors
## Matrix
## List
]

.right-column[
Contrary to vectors and matrices, lists can contain objects of different types.
These elements can also be named.


```r
x &lt;- list(one = 1, two_vector = 1:3,
          three_matrix = matrix(1:9, nrow = 3))
x
```

```
## $one
## [1] 1
## 
## $two_vector
## [1] 1 2 3
## 
## $three_matrix
##      [,1] [,2] [,3]
## [1,]    1    4    7
## [2,]    2    5    8
## [3,]    3    6    9
```
]

---

# Composite data types

.left-column[
## Factor
### Ordered factors
## Matrix
## List
]

.right-column[
Printing a very big list can become quite messy.
In order to get an overview of what the list contains, without printing every single element and subelement, we can look at the **str**ucture of the list with the `str` function.


```r
str(x)
```

```
## List of 3
##  $ one         : num 1
##  $ two_vector  : int [1:3] 1 2 3
##  $ three_matrix: int [1:3, 1:3] 1 2 3 4 5 6 7 8 9
```
]

---

# Composite data types

.left-column[
## Factor
### Ordered factors
## Matrix
## List
]

.right-column[
Indexing a list is a bit different from indexing a vector.
If we use single square brackets, we get a list back.


```r
x &lt;- list(one = 1:3, two = letters[1:5], three = rnorm(4))
x[1]
```

```
## $one
## [1] 1 2 3
```

```r
typeof(x[1])
```

```
## [1] "list"
```
]

---

# Composite data types

.left-column[
## Factor
### Ordered factors
## Matrix
## List
]

.right-column[
If we want the underlying object only, then use double brackets.


```r
x[[1]]
```

```
## [1] 1 2 3
```

```r
typeof(x[[1]])
```

```
## [1] "integer"
```
]

---

# Composite data types

.left-column[
## Factor
### Ordered factors
## Matrix
## List
]

.right-column[
If the elements are named, we can index by name just as well as position.


```r
x["one"]
```

```
## $one
## [1] 1 2 3
```

```r
x[["one"]]
```

```
## [1] 1 2 3
```

... and we can also use the `$` operator.


```r
x$one
```

```
## [1] 1 2 3
```
]

---

# Composite data types

.left-column[
## Factor
### Ordered factors
## Matrix
## List
## Data frame
]

.right-column[
Can be seen as a special case of a list where the length of each element is the same.


```r
x &lt;- data.frame(some_letters = letters[1:5], x = 6:10, y = rnorm(5))
x
```

```
##   some_letters  x           y
## 1            a  6  0.83134882
## 2            b  7  0.10521182
## 3            c  8 -1.74171309
## 4            d  9  0.64524699
## 5            e 10  0.09710422
```
]

???

This is probably the data structure that we will be spending most of our time with, at least during this course.

---

# Composite data types

.left-column[
## Factor
### Ordered factors
## Matrix
## List
## Data frame
]

.right-column[
Indexing a data frame has elements of all the different indexing methods we've seen so far.
We can use square brackets to access rows and columns.


```r
# Element in first row, second column
x[1, 2]
```

```
## [1] 6
```

```r
# First row
x[1, ]
```

```
##   some_letters x         y
## 1            a 6 0.8313488
```

```r
# Second column
x[, 2]
```

```
## [1]  6  7  8  9 10
```
]

---

# Composite data types

.left-column[
## Factor
### Ordered factors
## Matrix
## List
## Data frame
]

.right-column[
We can also use the `$` operator to access individual columns.


```r
x$some_letters
```

```
## [1] "a" "b" "c" "d" "e"
```
]

--

.right-column[
... which in turn is a vector that we can index.


```r
x$some_letters[2]
```

```
## [1] "b"
```
]

---

# Composite data types

.left-column[
## Factor
### Ordered factors
## Matrix
## List
## Data frame
## Tibble
]

.right-column[
For all practical purposes, this is a data frame, but with some extra bells and whistles.
The datasets that we looked at last week (`mpg` and `diamonds`) were both tibbles.
Anything you can do on a data frame, you can do on a tibble.

.note.red[
&lt;svg viewBox="0 0 576 512" style="position:relative;display:inline-block;top:.1em;height:2em;" xmlns="http://www.w3.org/2000/svg"&gt;  &lt;path d="M569.517 440.013C587.975 472.007 564.806 512 527.94 512H48.054c-36.937 0-59.999-40.055-41.577-71.987L246.423 23.985c18.467-32.009 64.72-31.951 83.154 0l239.94 416.028zM288 354c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"&gt;&lt;/path&gt;&lt;/svg&gt;
Some packages do overly strict checks on data frames, and might cause some things to fail if you supply a tibble instead of a traditional data frame.
Fortunately, this is easy to get around.
Just convert your tibble to a data frame: `as.data.frame(your_tibble)`
]
]

???

I would argue that there are very few reasons to using traditional data frames instead of tibbles.
There are some cases where you are kind of forced to use data frames, but these situations are few and far between.
All of the tools that we will be presenting during these weeks work perfectly well with tibbles.

---

# Composite data types

.left-column[
## Factor
### Ordered factors
## Matrix
## List
## Data frame
## Tibble
]

.right-column.small[

```r
mpg
```

```
## # A tibble: 234 × 11
##    manufacturer model      displ  year   cyl trans drv     cty   hwy fl    class
##    &lt;chr&gt;        &lt;chr&gt;      &lt;dbl&gt; &lt;int&gt; &lt;int&gt; &lt;chr&gt; &lt;chr&gt; &lt;int&gt; &lt;int&gt; &lt;chr&gt; &lt;chr&gt;
##  1 audi         a4           1.8  1999     4 auto… f        18    29 p     comp…
##  2 audi         a4           1.8  1999     4 manu… f        21    29 p     comp…
##  3 audi         a4           2    2008     4 manu… f        20    31 p     comp…
##  4 audi         a4           2    2008     4 auto… f        21    30 p     comp…
##  5 audi         a4           2.8  1999     6 auto… f        16    26 p     comp…
##  6 audi         a4           2.8  1999     6 manu… f        18    26 p     comp…
##  7 audi         a4           3.1  2008     6 auto… f        18    27 p     comp…
##  8 audi         a4 quattro   1.8  1999     4 manu… 4        18    26 p     comp…
##  9 audi         a4 quattro   1.8  1999     4 auto… 4        16    25 p     comp…
## 10 audi         a4 quattro   2    2008     4 manu… 4        20    28 p     comp…
## # … with 224 more rows
```
]

---

# Composite data types

.left-column[
## Factor
### Ordered factors
## Matrix
## List
## Data frame
## Tibble
]

.right-column.small[

```r
as.data.frame(mpg)
```

```
##     manufacturer                  model displ year cyl      trans drv cty hwy
## 1           audi                     a4   1.8 1999   4   auto(l5)   f  18  29
## 2           audi                     a4   1.8 1999   4 manual(m5)   f  21  29
## 3           audi                     a4   2.0 2008   4 manual(m6)   f  20  31
## 4           audi                     a4   2.0 2008   4   auto(av)   f  21  30
## 5           audi                     a4   2.8 1999   6   auto(l5)   f  16  26
## 6           audi                     a4   2.8 1999   6 manual(m5)   f  18  26
## 7           audi                     a4   3.1 2008   6   auto(av)   f  18  27
## 8           audi             a4 quattro   1.8 1999   4 manual(m5)   4  18  26
## 9           audi             a4 quattro   1.8 1999   4   auto(l5)   4  16  25
## 10          audi             a4 quattro   2.0 2008   4 manual(m6)   4  20  28
## 11          audi             a4 quattro   2.0 2008   4   auto(s6)   4  19  27
## 12          audi             a4 quattro   2.8 1999   6   auto(l5)   4  15  25
## 13          audi             a4 quattro   2.8 1999   6 manual(m5)   4  17  25
## 14          audi             a4 quattro   3.1 2008   6   auto(s6)   4  17  25
## 15          audi             a4 quattro   3.1 2008   6 manual(m6)   4  15  25
## 16          audi             a6 quattro   2.8 1999   6   auto(l5)   4  15  24
## 17          audi             a6 quattro   3.1 2008   6   auto(s6)   4  17  25
## 18          audi             a6 quattro   4.2 2008   8   auto(s6)   4  16  23
## 19     chevrolet     c1500 suburban 2wd   5.3 2008   8   auto(l4)   r  14  20
## 20     chevrolet     c1500 suburban 2wd   5.3 2008   8   auto(l4)   r  11  15
## 21     chevrolet     c1500 suburban 2wd   5.3 2008   8   auto(l4)   r  14  20
## 22     chevrolet     c1500 suburban 2wd   5.7 1999   8   auto(l4)   r  13  17
## 23     chevrolet     c1500 suburban 2wd   6.0 2008   8   auto(l4)   r  12  17
## 24     chevrolet               corvette   5.7 1999   8 manual(m6)   r  16  26
## 25     chevrolet               corvette   5.7 1999   8   auto(l4)   r  15  23
## 26     chevrolet               corvette   6.2 2008   8 manual(m6)   r  16  26
## 27     chevrolet               corvette   6.2 2008   8   auto(s6)   r  15  25
## 28     chevrolet               corvette   7.0 2008   8 manual(m6)   r  15  24
## 29     chevrolet        k1500 tahoe 4wd   5.3 2008   8   auto(l4)   4  14  19
## 30     chevrolet        k1500 tahoe 4wd   5.3 2008   8   auto(l4)   4  11  14
## 31     chevrolet        k1500 tahoe 4wd   5.7 1999   8   auto(l4)   4  11  15
## 32     chevrolet        k1500 tahoe 4wd   6.5 1999   8   auto(l4)   4  14  17
## 33     chevrolet                 malibu   2.4 1999   4   auto(l4)   f  19  27
## 34     chevrolet                 malibu   2.4 2008   4   auto(l4)   f  22  30
## 35     chevrolet                 malibu   3.1 1999   6   auto(l4)   f  18  26
## 36     chevrolet                 malibu   3.5 2008   6   auto(l4)   f  18  29
## 37     chevrolet                 malibu   3.6 2008   6   auto(s6)   f  17  26
## 38         dodge            caravan 2wd   2.4 1999   4   auto(l3)   f  18  24
## 39         dodge            caravan 2wd   3.0 1999   6   auto(l4)   f  17  24
## 40         dodge            caravan 2wd   3.3 1999   6   auto(l4)   f  16  22
## 41         dodge            caravan 2wd   3.3 1999   6   auto(l4)   f  16  22
## 42         dodge            caravan 2wd   3.3 2008   6   auto(l4)   f  17  24
## 43         dodge            caravan 2wd   3.3 2008   6   auto(l4)   f  17  24
## 44         dodge            caravan 2wd   3.3 2008   6   auto(l4)   f  11  17
## 45         dodge            caravan 2wd   3.8 1999   6   auto(l4)   f  15  22
## 46         dodge            caravan 2wd   3.8 1999   6   auto(l4)   f  15  21
## 47         dodge            caravan 2wd   3.8 2008   6   auto(l6)   f  16  23
## 48         dodge            caravan 2wd   4.0 2008   6   auto(l6)   f  16  23
## 49         dodge      dakota pickup 4wd   3.7 2008   6 manual(m6)   4  15  19
## 50         dodge      dakota pickup 4wd   3.7 2008   6   auto(l4)   4  14  18
## 51         dodge      dakota pickup 4wd   3.9 1999   6   auto(l4)   4  13  17
## 52         dodge      dakota pickup 4wd   3.9 1999   6 manual(m5)   4  14  17
## 53         dodge      dakota pickup 4wd   4.7 2008   8   auto(l5)   4  14  19
## 54         dodge      dakota pickup 4wd   4.7 2008   8   auto(l5)   4  14  19
## 55         dodge      dakota pickup 4wd   4.7 2008   8   auto(l5)   4   9  12
## 56         dodge      dakota pickup 4wd   5.2 1999   8 manual(m5)   4  11  17
## 57         dodge      dakota pickup 4wd   5.2 1999   8   auto(l4)   4  11  15
## 58         dodge            durango 4wd   3.9 1999   6   auto(l4)   4  13  17
## 59         dodge            durango 4wd   4.7 2008   8   auto(l5)   4  13  17
## 60         dodge            durango 4wd   4.7 2008   8   auto(l5)   4   9  12
## 61         dodge            durango 4wd   4.7 2008   8   auto(l5)   4  13  17
## 62         dodge            durango 4wd   5.2 1999   8   auto(l4)   4  11  16
## 63         dodge            durango 4wd   5.7 2008   8   auto(l5)   4  13  18
## 64         dodge            durango 4wd   5.9 1999   8   auto(l4)   4  11  15
## 65         dodge    ram 1500 pickup 4wd   4.7 2008   8 manual(m6)   4  12  16
## 66         dodge    ram 1500 pickup 4wd   4.7 2008   8   auto(l5)   4   9  12
## 67         dodge    ram 1500 pickup 4wd   4.7 2008   8   auto(l5)   4  13  17
## 68         dodge    ram 1500 pickup 4wd   4.7 2008   8   auto(l5)   4  13  17
## 69         dodge    ram 1500 pickup 4wd   4.7 2008   8 manual(m6)   4  12  16
## 70         dodge    ram 1500 pickup 4wd   4.7 2008   8 manual(m6)   4   9  12
## 71         dodge    ram 1500 pickup 4wd   5.2 1999   8   auto(l4)   4  11  15
## 72         dodge    ram 1500 pickup 4wd   5.2 1999   8 manual(m5)   4  11  16
## 73         dodge    ram 1500 pickup 4wd   5.7 2008   8   auto(l5)   4  13  17
## 74         dodge    ram 1500 pickup 4wd   5.9 1999   8   auto(l4)   4  11  15
## 75          ford         expedition 2wd   4.6 1999   8   auto(l4)   r  11  17
## 76          ford         expedition 2wd   5.4 1999   8   auto(l4)   r  11  17
## 77          ford         expedition 2wd   5.4 2008   8   auto(l6)   r  12  18
## 78          ford           explorer 4wd   4.0 1999   6   auto(l5)   4  14  17
## 79          ford           explorer 4wd   4.0 1999   6 manual(m5)   4  15  19
## 80          ford           explorer 4wd   4.0 1999   6   auto(l5)   4  14  17
## 81          ford           explorer 4wd   4.0 2008   6   auto(l5)   4  13  19
## 82          ford           explorer 4wd   4.6 2008   8   auto(l6)   4  13  19
## 83          ford           explorer 4wd   5.0 1999   8   auto(l4)   4  13  17
## 84          ford        f150 pickup 4wd   4.2 1999   6   auto(l4)   4  14  17
## 85          ford        f150 pickup 4wd   4.2 1999   6 manual(m5)   4  14  17
## 86          ford        f150 pickup 4wd   4.6 1999   8 manual(m5)   4  13  16
## 87          ford        f150 pickup 4wd   4.6 1999   8   auto(l4)   4  13  16
## 88          ford        f150 pickup 4wd   4.6 2008   8   auto(l4)   4  13  17
## 89          ford        f150 pickup 4wd   5.4 1999   8   auto(l4)   4  11  15
## 90          ford        f150 pickup 4wd   5.4 2008   8   auto(l4)   4  13  17
## 91          ford                mustang   3.8 1999   6 manual(m5)   r  18  26
## 92          ford                mustang   3.8 1999   6   auto(l4)   r  18  25
## 93          ford                mustang   4.0 2008   6 manual(m5)   r  17  26
## 94          ford                mustang   4.0 2008   6   auto(l5)   r  16  24
## 95          ford                mustang   4.6 1999   8   auto(l4)   r  15  21
## 96          ford                mustang   4.6 1999   8 manual(m5)   r  15  22
## 97          ford                mustang   4.6 2008   8 manual(m5)   r  15  23
## 98          ford                mustang   4.6 2008   8   auto(l5)   r  15  22
## 99          ford                mustang   5.4 2008   8 manual(m6)   r  14  20
## 100        honda                  civic   1.6 1999   4 manual(m5)   f  28  33
## 101        honda                  civic   1.6 1999   4   auto(l4)   f  24  32
## 102        honda                  civic   1.6 1999   4 manual(m5)   f  25  32
## 103        honda                  civic   1.6 1999   4 manual(m5)   f  23  29
## 104        honda                  civic   1.6 1999   4   auto(l4)   f  24  32
## 105        honda                  civic   1.8 2008   4 manual(m5)   f  26  34
## 106        honda                  civic   1.8 2008   4   auto(l5)   f  25  36
## 107        honda                  civic   1.8 2008   4   auto(l5)   f  24  36
## 108        honda                  civic   2.0 2008   4 manual(m6)   f  21  29
## 109      hyundai                 sonata   2.4 1999   4   auto(l4)   f  18  26
## 110      hyundai                 sonata   2.4 1999   4 manual(m5)   f  18  27
## 111      hyundai                 sonata   2.4 2008   4   auto(l4)   f  21  30
## 112      hyundai                 sonata   2.4 2008   4 manual(m5)   f  21  31
## 113      hyundai                 sonata   2.5 1999   6   auto(l4)   f  18  26
## 114      hyundai                 sonata   2.5 1999   6 manual(m5)   f  18  26
## 115      hyundai                 sonata   3.3 2008   6   auto(l5)   f  19  28
## 116      hyundai                tiburon   2.0 1999   4   auto(l4)   f  19  26
## 117      hyundai                tiburon   2.0 1999   4 manual(m5)   f  19  29
## 118      hyundai                tiburon   2.0 2008   4 manual(m5)   f  20  28
## 119      hyundai                tiburon   2.0 2008   4   auto(l4)   f  20  27
## 120      hyundai                tiburon   2.7 2008   6   auto(l4)   f  17  24
## 121      hyundai                tiburon   2.7 2008   6 manual(m6)   f  16  24
## 122      hyundai                tiburon   2.7 2008   6 manual(m5)   f  17  24
## 123         jeep     grand cherokee 4wd   3.0 2008   6   auto(l5)   4  17  22
## 124         jeep     grand cherokee 4wd   3.7 2008   6   auto(l5)   4  15  19
## 125         jeep     grand cherokee 4wd   4.0 1999   6   auto(l4)   4  15  20
## 126         jeep     grand cherokee 4wd   4.7 1999   8   auto(l4)   4  14  17
## 127         jeep     grand cherokee 4wd   4.7 2008   8   auto(l5)   4   9  12
## 128         jeep     grand cherokee 4wd   4.7 2008   8   auto(l5)   4  14  19
## 129         jeep     grand cherokee 4wd   5.7 2008   8   auto(l5)   4  13  18
## 130         jeep     grand cherokee 4wd   6.1 2008   8   auto(l5)   4  11  14
## 131   land rover            range rover   4.0 1999   8   auto(l4)   4  11  15
## 132   land rover            range rover   4.2 2008   8   auto(s6)   4  12  18
## 133   land rover            range rover   4.4 2008   8   auto(s6)   4  12  18
## 134   land rover            range rover   4.6 1999   8   auto(l4)   4  11  15
## 135      lincoln          navigator 2wd   5.4 1999   8   auto(l4)   r  11  17
## 136      lincoln          navigator 2wd   5.4 1999   8   auto(l4)   r  11  16
## 137      lincoln          navigator 2wd   5.4 2008   8   auto(l6)   r  12  18
## 138      mercury        mountaineer 4wd   4.0 1999   6   auto(l5)   4  14  17
## 139      mercury        mountaineer 4wd   4.0 2008   6   auto(l5)   4  13  19
## 140      mercury        mountaineer 4wd   4.6 2008   8   auto(l6)   4  13  19
## 141      mercury        mountaineer 4wd   5.0 1999   8   auto(l4)   4  13  17
## 142       nissan                 altima   2.4 1999   4 manual(m5)   f  21  29
## 143       nissan                 altima   2.4 1999   4   auto(l4)   f  19  27
## 144       nissan                 altima   2.5 2008   4   auto(av)   f  23  31
## 145       nissan                 altima   2.5 2008   4 manual(m6)   f  23  32
## 146       nissan                 altima   3.5 2008   6 manual(m6)   f  19  27
## 147       nissan                 altima   3.5 2008   6   auto(av)   f  19  26
## 148       nissan                 maxima   3.0 1999   6   auto(l4)   f  18  26
## 149       nissan                 maxima   3.0 1999   6 manual(m5)   f  19  25
## 150       nissan                 maxima   3.5 2008   6   auto(av)   f  19  25
## 151       nissan         pathfinder 4wd   3.3 1999   6   auto(l4)   4  14  17
## 152       nissan         pathfinder 4wd   3.3 1999   6 manual(m5)   4  15  17
## 153       nissan         pathfinder 4wd   4.0 2008   6   auto(l5)   4  14  20
## 154       nissan         pathfinder 4wd   5.6 2008   8   auto(s5)   4  12  18
## 155      pontiac             grand prix   3.1 1999   6   auto(l4)   f  18  26
## 156      pontiac             grand prix   3.8 1999   6   auto(l4)   f  16  26
## 157      pontiac             grand prix   3.8 1999   6   auto(l4)   f  17  27
## 158      pontiac             grand prix   3.8 2008   6   auto(l4)   f  18  28
## 159      pontiac             grand prix   5.3 2008   8   auto(s4)   f  16  25
## 160       subaru           forester awd   2.5 1999   4 manual(m5)   4  18  25
## 161       subaru           forester awd   2.5 1999   4   auto(l4)   4  18  24
## 162       subaru           forester awd   2.5 2008   4 manual(m5)   4  20  27
## 163       subaru           forester awd   2.5 2008   4 manual(m5)   4  19  25
## 164       subaru           forester awd   2.5 2008   4   auto(l4)   4  20  26
## 165       subaru           forester awd   2.5 2008   4   auto(l4)   4  18  23
## 166       subaru            impreza awd   2.2 1999   4   auto(l4)   4  21  26
## 167       subaru            impreza awd   2.2 1999   4 manual(m5)   4  19  26
## 168       subaru            impreza awd   2.5 1999   4 manual(m5)   4  19  26
## 169       subaru            impreza awd   2.5 1999   4   auto(l4)   4  19  26
## 170       subaru            impreza awd   2.5 2008   4   auto(s4)   4  20  25
## 171       subaru            impreza awd   2.5 2008   4   auto(s4)   4  20  27
## 172       subaru            impreza awd   2.5 2008   4 manual(m5)   4  19  25
## 173       subaru            impreza awd   2.5 2008   4 manual(m5)   4  20  27
## 174       toyota            4runner 4wd   2.7 1999   4 manual(m5)   4  15  20
## 175       toyota            4runner 4wd   2.7 1999   4   auto(l4)   4  16  20
## 176       toyota            4runner 4wd   3.4 1999   6   auto(l4)   4  15  19
## 177       toyota            4runner 4wd   3.4 1999   6 manual(m5)   4  15  17
## 178       toyota            4runner 4wd   4.0 2008   6   auto(l5)   4  16  20
## 179       toyota            4runner 4wd   4.7 2008   8   auto(l5)   4  14  17
## 180       toyota                  camry   2.2 1999   4 manual(m5)   f  21  29
## 181       toyota                  camry   2.2 1999   4   auto(l4)   f  21  27
## 182       toyota                  camry   2.4 2008   4 manual(m5)   f  21  31
## 183       toyota                  camry   2.4 2008   4   auto(l5)   f  21  31
## 184       toyota                  camry   3.0 1999   6   auto(l4)   f  18  26
## 185       toyota                  camry   3.0 1999   6 manual(m5)   f  18  26
## 186       toyota                  camry   3.5 2008   6   auto(s6)   f  19  28
## 187       toyota           camry solara   2.2 1999   4   auto(l4)   f  21  27
## 188       toyota           camry solara   2.2 1999   4 manual(m5)   f  21  29
## 189       toyota           camry solara   2.4 2008   4 manual(m5)   f  21  31
## 190       toyota           camry solara   2.4 2008   4   auto(s5)   f  22  31
## 191       toyota           camry solara   3.0 1999   6   auto(l4)   f  18  26
## 192       toyota           camry solara   3.0 1999   6 manual(m5)   f  18  26
## 193       toyota           camry solara   3.3 2008   6   auto(s5)   f  18  27
## 194       toyota                corolla   1.8 1999   4   auto(l3)   f  24  30
## 195       toyota                corolla   1.8 1999   4   auto(l4)   f  24  33
## 196       toyota                corolla   1.8 1999   4 manual(m5)   f  26  35
## 197       toyota                corolla   1.8 2008   4 manual(m5)   f  28  37
## 198       toyota                corolla   1.8 2008   4   auto(l4)   f  26  35
## 199       toyota land cruiser wagon 4wd   4.7 1999   8   auto(l4)   4  11  15
## 200       toyota land cruiser wagon 4wd   5.7 2008   8   auto(s6)   4  13  18
## 201       toyota      toyota tacoma 4wd   2.7 1999   4 manual(m5)   4  15  20
## 202       toyota      toyota tacoma 4wd   2.7 1999   4   auto(l4)   4  16  20
## 203       toyota      toyota tacoma 4wd   2.7 2008   4 manual(m5)   4  17  22
## 204       toyota      toyota tacoma 4wd   3.4 1999   6 manual(m5)   4  15  17
## 205       toyota      toyota tacoma 4wd   3.4 1999   6   auto(l4)   4  15  19
## 206       toyota      toyota tacoma 4wd   4.0 2008   6 manual(m6)   4  15  18
## 207       toyota      toyota tacoma 4wd   4.0 2008   6   auto(l5)   4  16  20
## 208   volkswagen                    gti   2.0 1999   4 manual(m5)   f  21  29
## 209   volkswagen                    gti   2.0 1999   4   auto(l4)   f  19  26
## 210   volkswagen                    gti   2.0 2008   4 manual(m6)   f  21  29
## 211   volkswagen                    gti   2.0 2008   4   auto(s6)   f  22  29
## 212   volkswagen                    gti   2.8 1999   6 manual(m5)   f  17  24
## 213   volkswagen                  jetta   1.9 1999   4 manual(m5)   f  33  44
## 214   volkswagen                  jetta   2.0 1999   4 manual(m5)   f  21  29
## 215   volkswagen                  jetta   2.0 1999   4   auto(l4)   f  19  26
## 216   volkswagen                  jetta   2.0 2008   4   auto(s6)   f  22  29
## 217   volkswagen                  jetta   2.0 2008   4 manual(m6)   f  21  29
## 218   volkswagen                  jetta   2.5 2008   5   auto(s6)   f  21  29
## 219   volkswagen                  jetta   2.5 2008   5 manual(m5)   f  21  29
## 220   volkswagen                  jetta   2.8 1999   6   auto(l4)   f  16  23
## 221   volkswagen                  jetta   2.8 1999   6 manual(m5)   f  17  24
## 222   volkswagen             new beetle   1.9 1999   4 manual(m5)   f  35  44
## 223   volkswagen             new beetle   1.9 1999   4   auto(l4)   f  29  41
## 224   volkswagen             new beetle   2.0 1999   4 manual(m5)   f  21  29
## 225   volkswagen             new beetle   2.0 1999   4   auto(l4)   f  19  26
## 226   volkswagen             new beetle   2.5 2008   5 manual(m5)   f  20  28
## 227   volkswagen             new beetle   2.5 2008   5   auto(s6)   f  20  29
## 228   volkswagen                 passat   1.8 1999   4 manual(m5)   f  21  29
## 229   volkswagen                 passat   1.8 1999   4   auto(l5)   f  18  29
## 230   volkswagen                 passat   2.0 2008   4   auto(s6)   f  19  28
## 231   volkswagen                 passat   2.0 2008   4 manual(m6)   f  21  29
## 232   volkswagen                 passat   2.8 1999   6   auto(l5)   f  16  26
## 233   volkswagen                 passat   2.8 1999   6 manual(m5)   f  18  26
## 234   volkswagen                 passat   3.6 2008   6   auto(s6)   f  17  26
##     fl      class
## 1    p    compact
## 2    p    compact
## 3    p    compact
## 4    p    compact
## 5    p    compact
## 6    p    compact
## 7    p    compact
## 8    p    compact
## 9    p    compact
## 10   p    compact
## 11   p    compact
## 12   p    compact
## 13   p    compact
## 14   p    compact
## 15   p    compact
## 16   p    midsize
## 17   p    midsize
## 18   p    midsize
## 19   r        suv
## 20   e        suv
## 21   r        suv
## 22   r        suv
## 23   r        suv
## 24   p    2seater
## 25   p    2seater
## 26   p    2seater
## 27   p    2seater
## 28   p    2seater
## 29   r        suv
## 30   e        suv
## 31   r        suv
## 32   d        suv
## 33   r    midsize
## 34   r    midsize
## 35   r    midsize
## 36   r    midsize
## 37   r    midsize
## 38   r    minivan
## 39   r    minivan
## 40   r    minivan
## 41   r    minivan
## 42   r    minivan
## 43   r    minivan
## 44   e    minivan
## 45   r    minivan
## 46   r    minivan
## 47   r    minivan
## 48   r    minivan
## 49   r     pickup
## 50   r     pickup
## 51   r     pickup
## 52   r     pickup
## 53   r     pickup
## 54   r     pickup
## 55   e     pickup
## 56   r     pickup
## 57   r     pickup
## 58   r        suv
## 59   r        suv
## 60   e        suv
## 61   r        suv
## 62   r        suv
## 63   r        suv
## 64   r        suv
## 65   r     pickup
## 66   e     pickup
## 67   r     pickup
## 68   r     pickup
## 69   r     pickup
## 70   e     pickup
## 71   r     pickup
## 72   r     pickup
## 73   r     pickup
## 74   r     pickup
## 75   r        suv
## 76   r        suv
## 77   r        suv
## 78   r        suv
## 79   r        suv
## 80   r        suv
## 81   r        suv
## 82   r        suv
## 83   r        suv
## 84   r     pickup
## 85   r     pickup
## 86   r     pickup
## 87   r     pickup
## 88   r     pickup
## 89   r     pickup
## 90   r     pickup
## 91   r subcompact
## 92   r subcompact
## 93   r subcompact
## 94   r subcompact
## 95   r subcompact
## 96   r subcompact
## 97   r subcompact
## 98   r subcompact
## 99   p subcompact
## 100  r subcompact
## 101  r subcompact
## 102  r subcompact
## 103  p subcompact
## 104  r subcompact
## 105  r subcompact
## 106  r subcompact
## 107  c subcompact
## 108  p subcompact
## 109  r    midsize
## 110  r    midsize
## 111  r    midsize
## 112  r    midsize
## 113  r    midsize
## 114  r    midsize
## 115  r    midsize
## 116  r subcompact
## 117  r subcompact
## 118  r subcompact
## 119  r subcompact
## 120  r subcompact
## 121  r subcompact
## 122  r subcompact
## 123  d        suv
## 124  r        suv
## 125  r        suv
## 126  r        suv
## 127  e        suv
## 128  r        suv
## 129  r        suv
## 130  p        suv
## 131  p        suv
## 132  r        suv
## 133  r        suv
## 134  p        suv
## 135  r        suv
## 136  p        suv
## 137  r        suv
## 138  r        suv
## 139  r        suv
## 140  r        suv
## 141  r        suv
## 142  r    compact
## 143  r    compact
## 144  r    midsize
## 145  r    midsize
## 146  p    midsize
## 147  p    midsize
## 148  r    midsize
## 149  r    midsize
## 150  p    midsize
## 151  r        suv
## 152  r        suv
## 153  p        suv
## 154  p        suv
## 155  r    midsize
## 156  p    midsize
## 157  r    midsize
## 158  r    midsize
## 159  p    midsize
## 160  r        suv
## 161  r        suv
## 162  r        suv
## 163  p        suv
## 164  r        suv
## 165  p        suv
## 166  r subcompact
## 167  r subcompact
## 168  r subcompact
## 169  r subcompact
## 170  p    compact
## 171  r    compact
## 172  p    compact
## 173  r    compact
## 174  r        suv
## 175  r        suv
## 176  r        suv
## 177  r        suv
## 178  r        suv
## 179  r        suv
## 180  r    midsize
## 181  r    midsize
## 182  r    midsize
## 183  r    midsize
## 184  r    midsize
## 185  r    midsize
## 186  r    midsize
## 187  r    compact
## 188  r    compact
## 189  r    compact
## 190  r    compact
## 191  r    compact
## 192  r    compact
## 193  r    compact
## 194  r    compact
## 195  r    compact
## 196  r    compact
## 197  r    compact
## 198  r    compact
## 199  r        suv
## 200  r        suv
## 201  r     pickup
## 202  r     pickup
## 203  r     pickup
## 204  r     pickup
## 205  r     pickup
## 206  r     pickup
## 207  r     pickup
## 208  r    compact
## 209  r    compact
## 210  p    compact
## 211  p    compact
## 212  r    compact
## 213  d    compact
## 214  r    compact
## 215  r    compact
## 216  p    compact
## 217  p    compact
## 218  r    compact
## 219  r    compact
## 220  r    compact
## 221  r    compact
## 222  d subcompact
## 223  d subcompact
## 224  r subcompact
## 225  r subcompact
## 226  r subcompact
## 227  r subcompact
## 228  p    midsize
## 229  p    midsize
## 230  p    midsize
## 231  p    midsize
## 232  p    midsize
## 233  p    midsize
## 234  p    midsize
```
]

???

Not only does tibbles print better, but they also have functionality that can help us easier make sense of our data.
We will go into these things later this week.

---

# Scripts

So far, we've been using the console to write our code.
This becomes impractical very quickly.
To make life easier, we can use the script editor for typing, and saving our code.

.center[
![:scale 50%](../img/rstudio_screenshot2.png)
]

???

I recommend that you create scripts for future exercises, and whenever you play around with your own data.
That way, you can build your own library of useful R commands as you go, and you can look at your own notes related to them.

---

# Commenting your code

When scripting, it is very useful to comment your code.
Comments in R start with a hash (`#`), and anything following that on the same line is ignored when running the code.


```r
# This is a comment
x &lt;- 1:15 # And this is another comment
```

Don't comment what the code is doing—the code already tells you that.
Instead comment on intention—*why* did you write that code?

???

Comments should help you understand why you wrote a certain piece of code.
Imagine that you are writing to the future self.
Without comments, you are bound to forget what you were thinking at the time.
Trust me, I do this all the time.

--

### Bad comment


```r
# Calculate the mean of x
x_mean &lt;- mean(x)
```

???

Imagine that this is part of larger script where you later want to do something to the mean value of `x`.

You don't say!
The code already tells us this.

--

### Good comment


```r
# Pre-calculate the mean so that we don't do it every iteration
x_mean &lt;- mean(x)
```

???

Imagine that we have code following this statement that would use this mean a thousand times in some type of calculation.
Instead of calculating the mean a thousand times, we pre-calculate it in order to save some computing resources.

---

# Suggested reading and exercises

- [R for Data Science: Vectors](https://r4ds.had.co.nz/vectors.html)
- Hands-On Programming with R
  - [The Very Basics](https://rstudio-education.github.io/hopr/basics.html) (skip 2.4 Writing Your Own Functions)
  - [R Objects](https://rstudio-education.github.io/hopr/r-objects.html): Sections 5.1-5.8
- [Base R Cheat Sheet](https://github.com/rstudio/cheatsheets/blob/master/base-r.pdf)
    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script src="js/macros.js"></script>
<script>var slideshow = remark.create({
"ratio": "16:9",
"highlightStyle": "github",
"highlightLines": true,
"countIncrementalSlides": false,
"navigation": {
"scroll": false
}
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();
(function() {
  "use strict"
  // Replace <script> tags in slides area to make them executable
  var scripts = document.querySelectorAll(
    '.remark-slides-area .remark-slide-container script'
  );
  if (!scripts.length) return;
  for (var i = 0; i < scripts.length; i++) {
    var s = document.createElement('script');
    var code = document.createTextNode(scripts[i].textContent);
    s.appendChild(code);
    var scriptAttrs = scripts[i].attributes;
    for (var j = 0; j < scriptAttrs.length; j++) {
      s.setAttribute(scriptAttrs[j].name, scriptAttrs[j].value);
    }
    scripts[i].parentElement.replaceChild(s, scripts[i]);
  }
})();
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
// adds .remark-code-has-line-highlighted class to <pre> parent elements
// of code chunks containing highlighted lines with class .remark-code-line-highlighted
(function(d) {
  const hlines = d.querySelectorAll('.remark-code-line-highlighted');
  const preParents = [];
  const findPreParent = function(line, p = 0) {
    if (p > 1) return null; // traverse up no further than grandparent
    const el = line.parentElement;
    return el.tagName === "PRE" ? el : findPreParent(el, ++p);
  };

  for (let line of hlines) {
    let pre = findPreParent(line);
    if (pre && !preParents.includes(pre)) preParents.push(pre);
  }
  preParents.forEach(p => p.classList.add("remark-code-has-line-highlighted"));
})(document);</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
